<!DOCTYPE html>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

<ui:composition template="template.xhtml">

	<ui:define name="head">
		<h:outputStylesheet library="css" name="cadastrar-cliente.css" />
	</ui:define>

	<ui:define name="conteudo">

		<p:panel styleClass="panel" id="panel" header="Cadastro de Cliente"
			style="width: 600px; margin: auto; margin-top: 5%; color: #FFF;">

			<p:growl id="growl" showDetail="true" />

			<div class="ui-fluid">
				<div>
					<p:selectOneRadio id="tipo-pessoa" required="true"
						value="#{clienteController.pessoaJuridica}" unselectable="true">
						<f:selectItem itemLabel="Pessoa Física" itemValue="false" />
						<f:selectItem itemLabel="Pessoa Jurídica" itemValue="true" />
						<p:ajax listener="#{clienteController.limpar}" process="@this"
							update="@form" />
					</p:selectOneRadio>


					<h:panelGroup layout="block"
						rendered="#{clienteController.pessoaJuridica == false}">

						<div class="ui-fluid p-formgrid p-grid">
							<div class="p-field p-col-12 p-md-6">
								<p:outputLabel for="nome" value="Nome" />
								<p:inputText id="nome" type="text" />
							</div>
							<div class="p-field p-col-12 p-md-6">
								<p:outputLabel for="sobrenome" value="Sobrenome" />
								<p:inputText id="sobrenome" type="text" />
							</div>

							<div class="p-field p-col-12 p-md-6">
								<p:outputLabel value="CPF" />
								<p:inputMask mask="999.999.999-99" id="cpf" maxlength="14"
									value="#{clienteController.entity.pessoa.cpf}" />
							</div>

							<div class="p-field p-col-12 p-md-6">
								<p:outputLabel for="data-nascimento" value="Data de Nascimento" />
								<p:datePicker id="data-nascimento"
									value="#{clienteController.entity.pessoa.dataNascimento}"
									monthNavigator="true" pattern="dd/MM/yyyy" mask="99/99/9999" />
							</div>
							<div class="p-field p-col-12 p-md-6">
								<p:outputLabel value="Sexo: " />
								<p:selectOneRadio value="#{clienteController.entity.pessoa.sexo}">
									<f:selectItems var="obj" value="#{clienteController.listaSexo}"
										itemLabel="#{obj.label}" />
								</p:selectOneRadio>
							</div>
						</div>
					</h:panelGroup>

					<h:panelGroup layout="block"
						rendered="#{clienteController.pessoaJuridica}">

						<div class="p-field p-col-12 p-md-6">
							<p:outputLabel value="É um fornecedor?" />
							<p:selectOneRadio id="fornecedor" required="true"
								value="#{clienteController.isFornecedor}" unselectable="true">
								<f:selectItem itemLabel="Sim" itemValue="true" />
								<f:selectItem itemLabel="Não" itemValue="false" />
								<p:ajax process="@this" update="@form" />
							</p:selectOneRadio>
						</div>

						<p:outputLabel value="CNPJ" />
						<p:inputMask value="#{clienteController.entity.pessoa.cnpj}"
							mask="99.999.999/9999-99" id="cnpj" maxlength="18" />
					</h:panelGroup>

					<div class="p-field p-col-12 p-md-6">
						<p:outputLabel for="email" value="Email" />
						<p:inputText value="#{clienteController.entity.email}" id="email"
							type="email" />
					</div>

					<h:panelGroup layout="block"
						rendered="#{clienteController.isFornecedor == true}">

						<div class="p-field p-col-12 p-md-6">
							<p:outputLabel for="razao-social" value="Razão Social" />
							<p:inputText
								value="#{clienteController.entity.pessoa.razaoSocial}"
								id="razao-social" type="text" />
						</div>

						<div class="p-field p-col-12 p-md-6">
							<p:outputLabel for="nome-fantasia" value="Nome Fantasia" />
							<p:inputText id="nome-fantasia" type="text" />
						</div>

						<div class="p-field p-col-12 p-md-6">
							<p:outputLabel for="insc-estadual" value="Inscrição Estadual" />
							<p:inputText id="insc-estadual" type="text" />
						</div>
					</h:panelGroup>


					<h:panelGroup layout="block">

						<p:commandButton value="Adicionar Endereço" icon="pi pi-add"
							onclick="PF('dlg').show()" process="@this" />

					</h:panelGroup>

					<p:dialog header="Adicionar Enderenço" widgetVar="dlg"
						minHeight="100" width="30%" showEffect="fade" modal="true"
						resizable="false" closeOnEscape="true">
						<p:panel id="endereco">

							<div class="ui-fluid">

								<p:messages closable="true" id="messages" styleClass="p-mr-2"
									errorStyle="color:red;margin:8px;"
									warnStyle="color:yellow;margin:8px;"
									infoStyle="color:green;margin:8px;">
									<p:autoUpdate />
								</p:messages>

								<p:outputLabel value="CEP " />
								<div class="ui-inputgroup">
									<p:inputMask mask="99999-999" id="cep" maxlength="9"
										value="#{clienteController.entity.endereco.cep}" />
									<p:commandButton
										actionListener="#{clienteController.buscarCep}"
										icon="pi pi-search" process="@this @form:cep"
										update="@form:endereco" styleClass="ui-button-warning" />
								</div>

								<div>
									<p:outputLabel value="Rua " />
									<p:inputText a:autofocus="false" id="rua"
										value="#{clienteController.entity.endereco.rua}" />
								</div>

								<div>
									<p:outputLabel value="Bairro " />
									<p:inputText id="bairro"
										value="#{clienteController.entity.endereco.bairro}" />
								</div>

								<div>
									<p:outputLabel value="Cidade " />
									<p:inputText id="cidade"
										value="#{clienteController.entity.endereco.cidade.nome}" />
								</div>

								<div>
									<p:outputLabel value="UF - Estado " />
									<p:inputText id="uf"
										value="#{clienteController.entity.endereco.cidade.estado.uf}" />
								</div>

								<div>
									<p:commandButton value="Salvar" icon="pi pi-plus"
										styleClass="ui-button-success" onclick="PF('dlg').hide()"
										process="@this" />
								</div>
							</div>

						</p:panel>
					</p:dialog>
				</div>
			</div>
			<f:facet name="footer">
				<div>
					<p:commandButton value="Cadastrar" styleClass="ui-button-success"
						action="#{clienteController.cadastrar}" process="@form"
						update="@form" />
				</div>
			</f:facet>
		</p:panel>
	</ui:define>
</ui:composition>
</html>